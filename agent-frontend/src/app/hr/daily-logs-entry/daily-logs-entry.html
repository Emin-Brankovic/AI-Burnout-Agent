<app-navbar></app-navbar>

<div class="container">
    <div class="header-section">
        <h1>Daily Logs Entry</h1>
        <p class="subtitle">Generate synthetic daily logs to test the burnout prediction system.</p>
    </div>

    <mat-card class="control-card">
        <mat-card-content class="control-content">
            <div class="controls-row">
                <mat-form-field appearance="outline" class="size-select">
                    <mat-label>Batch Size</mat-label>
                    <mat-select [(value)]="batchSize">
                        <mat-option *ngFor="let size of batchSizeOptions" [value]="size">
                            {{size}} Logs
                        </mat-option>
                    </mat-select>
                </mat-form-field>

                <div class="button-group">
                    <button mat-raised-button color="primary" (click)="generateLogs()" [disabled]="isLoading">
                        <mat-icon>autorenew</mat-icon>
                        Generate Logs
                    </button>

                    <button mat-stroked-button color="accent" (click)="trainModel()" [disabled]="isLoading">
                        <mat-icon>model_training</mat-icon>
                        Train
                    </button>
                </div>
            </div>

            <div *ngIf="isLoading" class="loading-container">
                <mat-progress-spinner mode="indeterminate" diameter="30"></mat-progress-spinner>
                <span>Generating logs...</span>
            </div>
        </mat-card-content>
    </mat-card>

    <div class="table-container mat-elevation-z8" *ngIf="dataSource()">
        <table mat-table [dataSource]="dataSource() || []">

            <!-- ID Column -->
          <!-- ID -->
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef>ID</th>
            <td mat-cell *matCellDef="let element">#{{ element.id }}</td>
          </ng-container>

          <!-- Employee ID -->
          <ng-container matColumnDef="employee_id">
            <th mat-header-cell *matHeaderCellDef>Employee</th>
            <td mat-cell *matCellDef="let element">{{ element.employee_id }}</td>
          </ng-container>

          <!-- Log Date -->
          <ng-container matColumnDef="log_date">
            <th mat-header-cell *matHeaderCellDef>Date</th>
            <td mat-cell *matCellDef="let element">
              {{ element.log_date | date:'mediumDate' }}
            </td>
          </ng-container>

          <!-- Hours Worked -->
          <ng-container matColumnDef="hours_worked">
            <th mat-header-cell *matHeaderCellDef>Hours Worked</th>
            <td mat-cell *matCellDef="let element">
              {{ element.hours_worked }}h
            </td>
          </ng-container>

          <!-- Hours Slept -->
          <ng-container matColumnDef="hours_slept">
            <th mat-header-cell *matHeaderCellDef>Hours Slept</th>
            <td mat-cell *matCellDef="let element">
              {{ element.hours_slept }}h
            </td>
          </ng-container>

          <!-- Daily Personal Time -->
          <ng-container matColumnDef="daily_personal_time">
            <th mat-header-cell *matHeaderCellDef>Personal Time</th>
            <td mat-cell *matCellDef="let element">
              {{ element.daily_personal_time }}h
            </td>
          </ng-container>

          <!-- Motivation Level -->
          <ng-container matColumnDef="motivation_level">
            <th mat-header-cell *matHeaderCellDef>Motivation</th>
            <td mat-cell *matCellDef="let element">
    <span class="badge motivation">
      {{ element.motivation_level }}/10
    </span>
            </td>
          </ng-container>

          <!-- Stress Level -->
          <ng-container matColumnDef="stress_level">
            <th mat-header-cell *matHeaderCellDef>Stress</th>
            <td mat-cell *matCellDef="let element">
    <span
      class="badge"
      [ngClass]="{
        'low': element.stress_level <= 3,
        'medium': element.stress_level > 3 && element.stress_level < 8,
        'high': element.stress_level >= 8
      }"
    >
      {{ element.stress_level }}/10
    </span>
            </td>
          </ng-container>

          <!-- Workload Intensity -->
          <ng-container matColumnDef="workload_intensity">
            <th mat-header-cell *matHeaderCellDef>Workload</th>
            <td mat-cell *matCellDef="let element">
              {{ element.workload_intensity }}/10
            </td>
          </ng-container>

          <!-- Overtime Hours -->
          <ng-container matColumnDef="overtime_hours_today">
            <th mat-header-cell *matHeaderCellDef>Overtime</th>
            <td mat-cell *matCellDef="let element">
              {{ element.overtime_hours_today }}h
            </td>
          </ng-container>


          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>

<!--    <div *ngIf="(!dataSource() || dataSource().length === 0) && !isLoading" class="empty-state">-->
<!--        <mat-icon>toc</mat-icon>-->
<!--        <p>No logs generated yet. Select a batch size and click Generate.</p>-->
<!--    </div>-->
</div>
